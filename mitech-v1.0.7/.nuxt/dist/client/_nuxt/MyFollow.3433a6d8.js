import{g as m,i as v,s as g,a as h}from"./state.4da28978.js";import{a as _}from"./axios.28bc18a3.js";import{_ as w}from"./defaultavatar.37b16ac5.js";import{aJ as k,a0 as i,F as y,as as x,$ as c,a1 as s,ag as p,ak as f,aE as C}from"./_plugin-vue_export-helper.2c3522c3.js";import"./entry.0cdb93ce.js";const b={name:"MyFanAndFollow",data(){return{scientists:[]}},mounted(){m(),this.load()},watch:{scientists:function(o,a){for(let t=0;t<o.length;t++){const l={"Content-Type":"application/json"},r={open_alex_id:o[t].author.open_alex_id};_.post("http://121.36.19.201/api/get_author_avatar/",r,{headers:l}).then(e=>{console.log(e.data),console.log(this.scientists[t].avatar_url),this.scientists[t].author.avatar_url=e.data.url}).catch(e=>{console.log(e),this.scientists[t].author.avatar_url="111"})}}},methods:{personal(o){v().value=o,g(),this.$router.push("/scientist")},load(){const o={"Content-Type":"application/json",Authorization:"Token "+h().value};_.get("http://121.36.19.201/api/get_follow/",{headers:o}).then(a=>{console.log(a.data),this.scientists=a.data}).catch(a=>{console.log(a)})},unfollow(o){const a={"Content-Type":"application/json",Authorization:"Token "+h().value},t={author_id:o};data=_.post("http://121.36.19.201/api/revoke_follow/",t,{headers:a}).then(l=>{console.log(l.data),this.load()}).catch(l=>{console.log(l)})}}},F={class:"fanorfollow_box"},T={class:"fanorfollow_left"},D={key:0,class:"fanorfollow_img",src:w},$=["src"],j={class:"fanorfollow_info"},z={class:"fanorfollow_info_top"},A=["onClick"],B={class:"fanorfollow_info_bottom"},L={class:"fanorfollow_botton"},M={class:"hero-button mt-30"},E=["onClick"];function S(o,a,t,l,r,e){const d=C("image-preview");return c(),i("div",F,[(c(!0),i(y,null,x(r.scientists,n=>(c(),i("div",{class:"fanorfollow",key:n.id},[s("div",T,[n.author.avatar_url==""?p((c(),i("img",D,null,512)),[[d]]):p((c(),i("img",{key:1,class:"fanorfollow_img",src:n.author.avatar_url},null,8,$)),[[d]])]),s("div",j,[s("div",z,[s("span",{style:{color:"#666","max-width":"180px","font-size":"large","font-weight":"500"},onClick:u=>e.personal(n.author.open_alex_id)},f(n.author.real_name),9,A)]),s("div",B,[s("span",null," WorkPlace:Â "+f(n.author.institution_display_name),1)])]),s("div",L,[s("div",M,[s("button",{class:"ht-btn ht-btm-md",onClick:u=>e.unfollow(n.author.open_alex_id)},"Unfollow",8,E)])])]))),128))])}const V=k(b,[["render",S]]);export{V as default};
