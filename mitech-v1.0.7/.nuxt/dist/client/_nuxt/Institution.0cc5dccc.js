import{_ as v}from"./Header.460fa155.js";import{_ as x}from"./Breadcrumbs.18353780.js";import{_ as w}from"./ChatBot.85e95aeb.js";import{_ as S,o as B}from"./entry.0cdb93ce.js";import{i as E,s as F,j as g,g as V,k as L}from"./state.4da28978.js";import{aJ as h,$ as c,a0 as d,n as m,af as j,a1 as n,ak as M,F as $,as as f,aa as p,ai as b}from"./_plugin-vue_export-helper.2c3522c3.js";import{a as _}from"./axios.28bc18a3.js";import{_ as y}from"./Footer.c5032859.js";import{_ as D}from"./OffCanvasMobileMenu.b67ad2ce.js";import"./HeaderTop.fc351d8a.js";/* empty css                                */const H={props:["teamMember"],methods:{storeSCIid(){var r=E();r.value=this.teamMember.id,F()}}},K={class:"grid-item"},T={class:"team-image"},z=["src"],J={class:"team-info"},O={class:"name"};function P(r,a,i,l,o,e){const t=S;return c(),d("div",K,[m(t,{to:"/scientist",class:"ht-member",onClick:a[0]||(a[0]=s=>e.storeSCIid())},{default:j(()=>[n("div",T,[n("img",{class:"img-fluid",src:i.teamMember.image,alt:"team member"},null,8,z)]),n("div",J,[n("h5",O,M(i.teamMember.name),1)])]),_:1})])}const k=h(H,[["render",P],["__scopeId","data-v-ad415c53"]]),R={components:{Member:k},data(){return{maxpage:1,pagelist:[1],nowpage:1,one_page:12,search:"",teamMembers:[]}},mounted(){const r={};var a="http://121.36.19.201/api/get_authors/?filter=last_known_institution.id:"+g().value+"&page="+this.$data.nowpage+"&per_page="+this.$data.one_page+"&sort=cited_by_count:desc";this.$data.search.length>0&&(a+="&search="+this.$data.search,this.$data.search=""),console.log(a),_.post(a,r).then(i=>{this.$data.maxpage=(i.data.meta.count+this.$data.one_page-1)/this.$data.one_page,console.log(i.data.results);for(let t=0;t<i.data.results.length;t++)this.$data.teamMembers.push({name:i.data.results[t].display_name,image:"/images/avator/scientist.png",id:i.data.results[t].id});this.$data.pagelist=[];var l=0;for(let t=this.$data.nowpage-1;t<=this.$data.maxpage&&(t>=1&&(this.$data.pagelist.push(t),l++),l!=4);t++);var o="http://121.36.19.201/api/get_author_avatar/";for(let t=0;t<this.$data.teamMembers.length;t++){console.log(t);var e={open_alex_id:this.$data.teamMembers[t].id};_.post(o,e).then(s=>{console.log(s),s.data.url&&(this.$data.teamMembers[t].image=s.data.url)}).catch(s=>{console.error("Error in search avator",s)}),this.$data.teamMembers[t].id}}).catch(i=>{console.error("Error in search",i)})},methods:{updatepage(){this.teamMembers=[];var r="http://121.36.19.201/api/get_authors/?filter=last_known_institution.id:"+g().value+"&page="+this.$data.nowpage+"&per_page="+this.$data.one_page+"&sort=cited_by_count:desc";this.$data.search.length>0&&(r+="&search="+this.$data.search,this.$data.search=""),console.log(r),_.post(r).then(a=>{console.log(a),this.$data.maxpage=(a.data.meta.count+this.$data.one_page-1)/this.$data.one_page,console.log(a.data.results);for(let e=0;e<a.data.results.length;e++)this.$data.teamMembers.push({name:a.data.results[e].display_name,image:"/images/avator/scientist.png",id:a.data.results[e].id});this.$data.pagelist=[];var i=0;for(let e=this.$data.nowpage-1;e<=this.$data.maxpage&&(e>=1&&(this.$data.pagelist.push(e),i++),i!=4);e++);var l="http://121.36.19.201/api/get_author_avatar/";for(let e=0;e<this.$data.teamMembers.length;e++){console.log(e);var o={open_alex_id:this.$data.teamMembers[e].id};_.post(l,o).then(t=>{console.log(t),t.data.url&&(this.$data.teamMembers[e].image=t.data.url)}).catch(t=>{console.error("Error in search avator",t)}),this.$data.teamMembers[e].id}}).catch(a=>{console.error("Error in search",a)})},nextpage(){this.$data.nowpage=this.$data.nowpage+1,this.updatepage()},lastpage(){this.$data.nowpage=this.$data.nowpage-1,this.updatepage()},setpage(r){this.$data.nowpage=r,this.updatepage()},handleSearch(){var r=this.$refs.myinput.value;console.log(this.$refs.myinput.value),this.$data.search=r,this.$data.nowpage=1,this.updatepage()}}},q={class:"team-member-wrapper section-space--pt_70 section-space--pb_70"},A={class:"container"},G={class:"widget-search mb-30"},Q=n("span",{class:"search-btn-icon fa fa-search"},null,-1),U=[Q],W={class:"row ht-team-member-style-three"},X={class:"ht-pagination mt-30 pagination justify-content-center"},Y={class:"pagination-wrapper"},Z={class:"pagination"},tt=n("a",null,"PREV",-1),et=[tt],at={key:0},st=["onClick"],ot={key:1},nt=n("a",null,"Next",-1),it=[nt];function rt(r,a,i,l,o,e){const t=k;return c(),d("div",q,[n("div",A,[n("div",G,[n("input",{ref:"myinput",type:"text",placeholder:"Enter search keyword",onKeydown:a[0]||(a[0]=B(s=>e.handleSearch(),["enter"]))},null,544),n("button",{onClick:a[1]||(a[1]=s=>e.handleSearch()),type:"submit",class:"search-submit"},U)]),n("div",W,[(c(!0),d($,null,f(o.teamMembers,s=>(c(),d("div",{class:"col-lg-3 col-md-6 text-center wow move-up",key:s.id},[m(t,{teamMember:s},null,8,["teamMember"])]))),128))]),n("div",X,[n("div",Y,[n("ul",Z,[n("li",{class:p(["page-item",{disabled:o.nowpage==1}]),onClick:a[2]||(a[2]=s=>e.lastpage())},et,2),o.pagelist[0]!=1?(c(),d("li",at,"...")):b("",!0),(c(!0),d($,null,f(o.pagelist,s=>(c(),d("li",{class:p(["page-item",{active:o.nowpage==s}]),key:s.id,onClick:u=>e.setpage(s)},[n("a",null,M(s),1)],10,st))),128)),o.pagelist[o.pagelist.length-1]!=o.maxpage?(c(),d("li",ot,"...")):b("",!0),n("li",{class:p(["page-item",{disabled:o.nowpage==o.maxpage}]),onClick:a[3]||(a[3]=s=>e.nextpage())},it,2)])])])])])}const C=h(R,[["render",rt]]),ct={mounted(){console.log(this.InsName),V()},components:{InstitutionsMember:C,Breadcrumbs:x,Header:v,Footer:y,OffCanvasMobileMenu:D,ChatBot:w},data(){return{InsName:L().value}}},dt={class:"main-container"};function lt(r,a,i,l,o,e){const t=v,s=x,u=w,I=C,N=y;return c(),d("div",dt,[m(t),m(s,{items:o.InsName,breadcrumbTitle:o.InsName},null,8,["items","breadcrumbTitle"]),m(u,{prompt:o.InsName+","},null,8,["prompt"]),m(I),m(N)])}const wt=h(ct,[["render",lt]]);export{wt as default};
