import{_ as y}from"./Header.460fa155.js";import{a as m,b as C,s as v,g as N}from"./state.4da28978.js";import{a as f}from"./axios.28bc18a3.js";import{aJ as g,$ as r,a0 as _,a1 as e,ak as l,ai as $,F as k,as as x,n as c,af as b}from"./_plugin-vue_export-helper.2c3522c3.js";import{_ as w}from"./entry.0cdb93ce.js";import{_ as D}from"./ChatBot.85e95aeb.js";import{_ as A}from"./Footer.c5032859.js";import{_ as M}from"./OffCanvasMobileMenu.b67ad2ce.js";import"./HeaderTop.fc351d8a.js";/* empty css                                */const P={data(){return{infoUrl:"http://121.36.19.201/api/info/",info:null}},methods:{async getManagerInfo(){const t={"Content-Type":"application/json",Authorization:"Token "+m().value};await f.get(this.infoUrl,{headers:t}).then(a=>{console.log(a.data),this.info=a.data}).catch(a=>{console.log(a)}).finally(()=>{})}},async mounted(){await this.getManagerInfo()}},V={key:0,class:"manager-table"},H={class:"manager-tr"},O=e("th",{class:"manager-th"},"姓名",-1),j={class:"manager-th"},E=e("th",{class:"manager-th"},"管理员编号",-1),J={class:"manager-th"};function q(t,a,i,o,h,n){return h.info?(r(),_("table",V,[e("tr",H,[O,e("th",j,l(h.info.username),1),E,e("th",J,l(h.info.id),1)])])):$("",!0)}const S=g(P,[["render",q]]);const G={},K={class:"hr-g"};function Q(t,a,i,o,h,n){return r(),_("hr",K)}const U=g(G,[["render",Q]]);const R={data(){const t={Authorization:"token "+m().value};return{checkUrl:"http://121.36.19.201/api/message/",postUrl:"http://121.36.19.201/api/examine/",checks:[],headers:t}},methods:{async getData(){await f.get(this.checkUrl,{headers:this.headers}).then(t=>{console.log(t.data),this.checks=t.data}).catch(t=>{console.log(t)})},async postStatus(t,a){const i={data:a,mid:t};await f.post(this.postUrl,i,{headers:this.headers}).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})},async agree(t){t.is_read=!0,await this.postStatus(t.id,1),console.log("agree")},async disagree(t){t.is_read=!0,await this.postStatus(t.id,0),console.log("disagree")},setCheck(t){C().value=t,v()}},computed:{undefinedApplications:function(){return this.checks==null?[]:this.checks.filter(function(t){return t.type==10&&t.is_read==!1})}},async mounted(){await this.getData()}},W={class:"scholar-table"},X=e("tr",{class:"scholar-tr0"},[e("th",{class:"scholar-th"},"申请ID"),e("th",{class:"scholar-th"},"申请人ID"),e("th",{class:"scholar-th"},"申请人姓名"),e("th",{class:"scholar-th"},"申请详情")],-1),Y={class:"scholar-td"},Z={class:"scholar-td"},tt={class:"scholar-td"},et={class:"scholar-td"},st=e("p",null,"门户认领pdf的跳转链接",-1),nt={class:"scholar-btn"},at=["onClick"],ot=e("span",null,"同意",-1),ct=[ot],rt=["onClick"],_t=e("span",null,"驳回",-1),lt=[_t],it={key:0,class:"scholar-blank"};function ht(t,a,i,o,h,n){const u=w;return r(),_(k,null,[e("table",W,[X,(r(!0),_(k,null,x(n.undefinedApplications,(s,d)=>(r(),_("tr",{class:"scholar-tr",key:d},[e("td",Y,l(s.id),1),e("td",Z,l(s.sender),1),e("td",tt,l(s.sender_name),1),e("td",et,[c(u,{to:`/scholar-check/${s.id}`,onClick:p=>n.setCheck(s.url)},{default:b(()=>[st]),_:2},1032,["to","onClick"])]),e("td",nt,[e("button",{class:"check-btn",onClick:p=>n.agree(s)},ct,8,at),e("button",{class:"check-btn",onClick:p=>n.disagree(s)},lt,8,rt)])]))),128))]),n.undefinedApplications.length==0?(r(),_("p",it,"暂无申请")):$("",!0)],64)}const I=g(R,[["render",ht]]);const dt={data(){const t={Authorization:"token "+m().value};return{checkUrl:"http://121.36.19.201/api/message/",postUrl:"http://121.36.19.201/api/analysis/examine",checks:[],headers:t}},methods:{async getData(){await f.get(this.checkUrl,{headers:this.headers}).then(t=>{console.log("check:"+t.data),this.checks=t.data}).catch(t=>{console.log(t)})},async postStatus(t,a){const i={message_id:t,flag:a};await f.post(this.postUrl,i,{headers:this.headers}).then(o=>{console.log(o.data)}).catch(o=>{console.log(o)})},async agree(t){t.is_read=!0,await this.postStatus(t.id,1),console.log("agree")},async disagree(t){t.is_read=!0,await this.postStatus(t.id,0),console.log("disagree")},setCheck(t){C().value=t,v()}},computed:{undefinedApplications:function(){return this.checks==null?[]:this.checks.filter(function(t){return t.type==6&&t.is_read==!1})}},async mounted(){await this.getData()}},pt={class:"paper-table"},ut=e("tr",{class:"paper-tr0"},[e("th",{class:"paper-th"},"申请ID"),e("th",{class:"paper-th"},"论文标题"),e("th",{class:"paper-th"},"解析人姓名"),e("th",{class:"paper-th"},"解析内容")],-1),ft={class:"paper-td"},gt={class:"paper-td"},kt={class:"paper-td"},mt={class:"paper-td"},$t={class:"paper-btn"},yt=["onClick"],Ct=e("span",null,"同意",-1),vt=[Ct],xt=["onClick"],bt=e("span",null,"驳回",-1),wt=[bt],Dt={key:0,class:"paper-blank"};function At(t,a,i,o,h,n){const u=w;return r(),_(k,null,[e("table",pt,[ut,(r(!0),_(k,null,x(n.undefinedApplications,(s,d)=>(r(),_("tr",{class:"paper-tr",key:d},[e("td",ft,l(s.analysis),1),e("td",gt,l(s.work_title),1),e("td",kt,l(s.sender_name),1),e("td",mt,[c(u,{to:`/paper-check/${s.analysis}`,onClick:p=>n.setCheck(s.analysis_url)},{default:b(()=>[e("p",null,"来自"+l(s.sender_name)+"的解析",1)]),_:2},1032,["to","onClick"])]),e("td",$t,[e("button",{class:"check-btn",onClick:p=>n.agree(s)},vt,8,yt),e("button",{class:"check-btn",onClick:p=>n.disagree(s)},wt,8,xt)])]))),128))]),n.undefinedApplications.length==0?(r(),_("p",Dt,"暂无申请")):$("",!0)],64)}const B=g(dt,[["render",At]]),Mt={data(){return{headers:{Authorization:"Token "+m().value},info:null}},components:{Header:y,ManagerInfo:S,Divider:U,ScholarCheck:I,PaperCheck:B,Footer:A,OffCanvasMobileMenu:M,ChatBot:D},methods:{},async mounted(){N()}};function St(t,a,i,o,h,n){const u=y,s=S,d=U,p=I,z=B,F=D,T=A,L=M;return r(),_("div",null,[c(u),c(s),c(d),c(p),c(d),c(z),c(d),c(F),c(T),c(L)])}const Ht=g(Mt,[["render",St]]);export{Ht as default};
