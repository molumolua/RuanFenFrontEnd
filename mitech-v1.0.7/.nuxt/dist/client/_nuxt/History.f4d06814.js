import{g as j,c as $,s as E,a as k}from"./state.4da28978.js";import{a as x}from"./axios.28bc18a3.js";import{q as A,r as L,s as V}from"./entry.0cdb93ce.js";/* empty css             *//* empty css                *//* empty css               *//* empty css                */import{aJ as C,$ as s,ae as w,af as h,a1 as e,ak as d,n as y,aj as m,a0 as c,as as u,F as _,U as I,aM as z,aN as B,aa as v,ai as b}from"./_plugin-vue_export-helper.2c3522c3.js";const D={name:"Paper",props:["paper"],mounted(){j(),console.log("1")},methods:{jumpToArticle(i){console.log("jump"),$().value="https://openalex.org/"+i,E(),console.log($().value),this.$router.push("/articledetail")}}},T=i=>(z("data-v-d1d2c016"),i=i(),B(),i),H={class:"me-article-header"},S={class:"me-pull-right me-article-count"},M={class:"me-artile-description"},P=["innerHTML"],F={class:"me-article-footer"},q=T(()=>e("i",{class:"me-icon-author"},null,-1)),J=T(()=>e("div",{class:"me-pull-right me-article-time"},[e("span",{class:"me-pull-right me-article-count"})],-1));function R(i,t,o,a,n,p){const g=I("Clock"),l=A,f=L,N=V;return s(),w(N,{class:"me-area","body-style":{padding:"16px"}},{default:h(()=>[e("div",H,[e("li",null,d(o.paper.language)+"    Citation Count: "+d(o.paper.cited_by_count),1),e("span",S,[y(l,null,{default:h(()=>[y(g)]),_:1}),m(" "+d(o.paper.publication_date),1)])]),e("div",M,[e("div",{innerHTML:o.paper.title,class:"me-article-title",onClick:t[0]||(t[0]=r=>p.jumpToArticle(o.paper.ID))},null,8,P)]),e("div",F,[(s(!0),c(_,null,u(o.paper.authorships,r=>(s(),c("span",{class:"me-article-author",key:i.index},[q,m(" "+d(r.name),1)]))),128)),(s(!0),c(_,null,u(i.tags,r=>(s(),w(f,{key:r.tagName,size:"small",type:"warning"},{default:h(()=>[m(d(r.tagName),1)]),_:2},1024))),128)),J])]),_:1})}const U=C(D,[["render",R],["__scopeId","data-v-d1d2c016"]]);const W={components:{ArticleItem:U},name:"myarticle",data(){return{maxpage:5,pagelist:[1],nowpage:1,one_page:5,papers:[]}},mounted(){this.papers=[];const i={"Content-Type":"application/json",Authorization:"token "+k().value};x.get("http://121.36.19.201/api/history/",{headers:i}).then(t=>{console.log(t.data),this.$data.maxpage=parseInt((t.data.length+this.$data.one_page-1)/this.$data.one_page),this.$data.pagelist=[];var o=0;for(let a=this.$data.nowpage-1;a<=this.$data.maxpage&&(a>=1&&(this.$data.pagelist.push(a),o++),o!=4);a++);t.data=t.data.slice().reverse(),console.log(t.data);for(let a=0;a<t.data.length&&a<5;a++)this.$data.papers.push({title:t.data[a].title,publication_date:t.data[a].publication_date,language:t.data[a].language,authorships:t.data[a].name,cited_by_count:t.data[a].cited_by_count,ID:t.data[a].open_alex_id})}).catch(t=>{console.error(t)})},methods:{updatepage(){this.papers=[];const i={"Content-Type":"application/json",Authorization:"token "+k().value};x.get("http://121.36.19.201/api/history/",{headers:i}).then(t=>{console.log(t.data),this.$data.maxpage=parseInt((t.data.length+this.$data.one_page-1)/this.$data.one_page),this.$data.pagelist=[];var o=0;for(let a=this.$data.nowpage-1;a<=this.$data.maxpage&&(a>=1&&(this.$data.pagelist.push(a),o++),o!=4);a++);t.data=t.data.slice().reverse();for(let a=5*(this.$data.nowpage-1);a<t.data.length&&a<5*this.$data.nowpage;a++)this.$data.papers.push({title:t.data[a].title,publication_date:t.data[a].publication_date,language:t.data[a].language,authorships:t.data[a].name,cited_by_count:t.data[a].cited_by_count,ID:t.data[a].open_alex_id})}).catch(t=>{console.error("Error in search",t)})},nextpage(){this.$data.nowpage=this.$data.nowpage+1,this.updatepage()},lastpage(){this.$data.nowpage=this.$data.nowpage-1,this.updatepage()},setpage(i){this.$data.nowpage=i,this.updatepage()}}},G={class:"myart1"},K={class:"ht-pagination mt-30 pagination justify-content-center"},O={class:"pagination-wrapper"},Q={class:"pagination"},X=e("a",null,"PREV",-1),Y=[X],Z={key:0},tt=["onClick"],at={key:1},et=e("a",null,"Next",-1),it=[et];function ot(i,t,o,a,n,p){const g=I("article-item");return s(),c(_,null,[e("div",G,[(s(!0),c(_,null,u(n.papers,l=>(s(),c("div",{key:l.cited_by_count},[y(g,{paper:l},null,8,["paper"])]))),128))]),e("div",K,[e("div",O,[e("ul",Q,[e("li",{class:v(["page-item",{disabled:n.nowpage==1}]),onClick:t[0]||(t[0]=l=>p.lastpage())},Y,2),n.pagelist[0]!=1?(s(),c("li",Z,"...")):b("",!0),(s(!0),c(_,null,u(n.pagelist,l=>(s(),c("li",{class:v(["page-item",{active:n.nowpage==l}]),key:l.id,onClick:f=>p.setpage(l)},[e("a",null,d(l),1)],10,tt))),128)),n.pagelist[n.pagelist.length-1]!=n.maxpage?(s(),c("li",at,"...")):b("",!0),e("li",{class:v(["page-item",{disabled:n.nowpage==n.maxpage}]),onClick:t[1]||(t[1]=l=>p.nextpage())},it,2)])])])],64)}const ut=C(W,[["render",ot]]);export{ut as default};
