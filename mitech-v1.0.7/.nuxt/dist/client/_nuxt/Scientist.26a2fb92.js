import{_ as x}from"./Header.460fa155.js";import{t as O,x as U,L,q,B as H,D as J,s as W,G,I as K,J as R,_ as Q,K as X}from"./entry.0cdb93ce.js";import{_ as Y}from"./el-overlay.538533c5.js";import{_ as D}from"./Footer.c5032859.js";/* empty css             *//* empty css                */import{_ as Z}from"./authentication.849d26eb.js";/* empty css                  *//* empty css                *//* empty css                */import{g as $,a as p,i as m}from"./state.4da28978.js";import{a as r}from"./axios.28bc18a3.js";import{_ as tt}from"./OffCanvasMobileMenu.b67ad2ce.js";import{_ as ot}from"./defaultavatar.37b16ac5.js";import{aJ as et,a0 as u,n,a1 as t,ag as st,ae as C,ak as f,ai as w,P as nt,af as l,$ as c,aM as at,aN as lt,aj as h,U as y,aE as it}from"./_plugin-vue_export-helper.2c3522c3.js";import"./HeaderTop.fc351d8a.js";/* empty css                                */const _t=O();for(const[s,o]of Object.entries(U))_t.vueApp.component(s,o);const dt={components:{Header:x,Footer:D,OffCanvasMobileMenu:tt},mounted(){$(),this.load(),this.load_avatar(),p().value!=null&&this.load_follow()},name:"Person",data(){return{avatar_url:"",file1:null,file2:null,isfollowed:!1,dialogVisible:!1,id:"",name:"",work_count:Number,cited_by_count:Number,last_known_institution:"",scientists:[],user:{}}},methods:{async load(){console.log(m().value);const s={"Content-Type":"application/json"},o={single_object_id:m().value};data=await r.post("http://121.36.19.201/api/get_authors/",o,{headers:s}).then(e=>{console.log(e.data),this.id=e.data.id,this.name=e.data.display_name,this.work_count=e.data.works_count,this.cited_by_count=e.data.cited_by_count,this.last_known_institution=e.data.last_known_institution.display_name}).catch(e=>{console.log(e)})},async load_avatar(){console.log("SCI"+m().value);const s={"Content-Type":"application/json"},o={open_alex_id:m().value};data=await r.post("http://121.36.19.201/api/get_author_avatar/",o,{headers:s}).then(e=>{console.log(e.data),this.avatar_url=e.data.url}).catch(e=>{console.log(e)})},async load_follow(){const s={"Content-Type":"application/json",Authorization:"Token "+p().value};data=await r.get("http://121.36.19.201/api/get_follow/",{headers:s}).then(o=>{console.log(o.data),this.scientists=o.data;for(var e=0;e<this.scientists.length;++e)this.scientists[e].author.open_alex_id==m().value&&(this.isfollowed=!0)}).catch(o=>{console.log(o)})},follow(){const s={"Content-Type":"application/json",Authorization:"Token "+p().value},o={openalex_id:this.id,real_name:this.name,work_count:this.work_count,institution_display_name:this.last_known_institution};data=r.post("http://121.36.19.201/api/create_follow/",o,{headers:s}).then(e=>{console.log(e.data),this.isfollowed=!0}).catch(e=>{console.log(e)})},unfollow(){const s={"Content-Type":"application/json",Authorization:"Token "+p().value},o={author_id:this.id};data=r.post("http://121.36.19.201/api/revoke_follow/",o,{headers:s}).then(e=>{console.log(e.data),this.isfollowed=!1}).catch(e=>{console.log(e)})},edit(){this.dialogVisible=!0},uploadImage(s){this.file1=s.target.files[0],console.log("222"),this.file1===void 0?console.log("undefined"):console.log(this.file1)},uploadPDF(s){this.file2=s.target.files[0],this.file2===void 0?console.log("undefined"):console.log(this.file2)},async submit(){const s={"Content-Type":"multipart/form-data",Authorization:"token "+p().value},o={image:this.file1,pdf:this.file2,real_name:this.name,work_count:this.work_count,created_time:"1111",institution_display_name:this.last_known_institution,openalex_id:this.id};await r.post("http://121.36.19.201/api/uploadconfirm/",o,{headers:s}).then(e=>{console.log(e.data),this.dialogVisible=!1}).catch(e=>{console.log(e)})},handleClose(){this.dialogVisible=!1}}},d=s=>(at("data-v-ca1ba67e"),s=s(),lt(),s),ct={class:"main-container"},rt={class:"PersonTop"},ut={class:"PersonTop_img"},pt={key:0,src:ot},mt={class:"PersonTop_text"},ht={class:"user_text"},ft={class:"user_name"},vt={class:"user_workplace"},gt={key:0,class:"user_workplace"},bt=d(()=>t("img",{src:Z,class:"user-v-img"},null,-1)),wt=d(()=>t("span",{class:"user-v-font"},"已认证学者",-1)),yt=[bt,wt],kt={key:1,class:"hero-button mt-30"},Ct={class:"user_num"},xt={class:"num_number"},Dt=d(()=>t("span",{class:"num_text"},"Published",-1)),Pt={class:"user_num"},It={class:"num_number"},Tt=d(()=>t("span",{class:"num_text"},"Cited",-1)),Ft={class:"person_body"},Vt={class:"person_body_left"},At=d(()=>t("div",{slot:"header",class:"clearfix"},[t("span",{class:"person_body_list",style:{"border-bottom":"none"}},"Resercher Info")],-1)),Et=d(()=>t("span",{slot:"title"},"Introduction",-1)),Nt=d(()=>t("span",{slot:"title"},"Published Paper",-1)),St={class:"person_body_right"},zt={class:"updateinfo"},jt={class:"left"},Mt=d(()=>t("div",{class:"div-label"},[t("label",null,[h("Please select one of your "),t("span",{style:{"font-weight":"bold","font-size":"large"}},"ID photos.")])],-1)),Bt=d(()=>t("div",{class:"div-label"},[t("label",null,[h("Please change Form.doc into "),t("span",{style:{"font-weight":"bold","font-size":"large"}},"PDF"),h(" and upload it.")])],-1)),Ot=d(()=>t("div",{class:"div-label"},[t("label",null,[h("Please download the "),t("span",{style:{"font-weight":"bold","font-size":"large"}},"application form template"),h(" before uploading your documents")])],-1)),Ut=d(()=>t("a",{href:"/111.doc",download:"111.doc",class:"ht-btn ht-btm-md"},"DOWNLOAD",-1)),Lt={slot:"footer",class:"dialog-footer"};function qt(s,o,e,Ht,_,i){const P=x,I=L,T=y("User"),v=q,k=Q,g=H,F=y("Document"),V=y("StarFilled"),A=J,E=W,N=X,b=G,S=K,z=R,j=Y,M=D,B=it("image-preview");return c(),u("div",ct,[n(P),t("div",null,[t("div",rt,[t("div",ut,[_.avatar_url==""?st((c(),u("img",pt,null,512)),[[B]]):(c(),C(I,{key:1,shape:"square",size:150,fit:"cover",src:_.avatar_url},null,8,["src"]))]),t("div",mt,[t("div",ht,[t("div",ft,[t("span",null,f(_.name),1)]),t("div",vt,[t("span",null,"WorkPlace: "+f(_.last_known_institution),1)]),_.avatar_url!=""?(c(),u("div",gt,yt)):w("",!0),("useToken"in s?s.useToken:nt(p))().value!=""?(c(),u("div",kt,[_.isfollowed==!1?(c(),u("button",{key:0,class:"ht-btn ht-btm-md",onClick:o[0]||(o[0]=(...a)=>i.follow&&i.follow(...a))},"Follow")):(c(),u("button",{key:1,class:"ht-btn ht-btm-md",onClick:o[1]||(o[1]=(...a)=>i.unfollow&&i.unfollow(...a))},"UnFollow"))])):w("",!0)]),t("div",Ct,[t("div",{style:{cursor:"pointer"},onClick:o[2]||(o[2]=(...a)=>s.myfan&&s.myfan(...a))},[t("div",xt,f(_.work_count),1),Dt])]),t("div",Pt,[t("div",{style:{cursor:"pointer"},onClick:o[3]||(o[3]=(...a)=>s.myfan&&s.myfan(...a))},[t("div",It,f(_.cited_by_count),1),Tt])])])]),t("div",Ft,[t("div",Vt,[n(E,{class:"box-card","body-style":{padding:"0px"}},{default:l(()=>[At,n(A,{"active-text-color":"#00c3ff",class:"el-menu-vertical-demo"},{default:l(()=>[n(g,null,{default:l(()=>[n(k,{to:"/scientist/sciinfo"},{default:l(()=>[n(v,null,{default:l(()=>[n(T)]),_:1}),Et]),_:1})]),_:1}),n(g,null,{default:l(()=>[n(k,{to:"/scientist/scipaper"},{default:l(()=>[n(v,null,{default:l(()=>[n(F)]),_:1}),Nt]),_:1})]),_:1}),_.avatar_url==""?(c(),C(g,{key:0},{default:l(()=>[n(v,null,{default:l(()=>[n(V)]),_:1}),t("span",{slot:"title",onClick:o[4]||(o[4]=(...a)=>i.edit&&i.edit(...a))},"门户认领")]),_:1})):w("",!0)]),_:1})]),_:1})]),t("div",St,[n(N)])])]),n(j,null,{default:l(()=>[n(z,{title:"Modify Personal Info",modelValue:_.dialogVisible,"onUpdate:modelValue":o[9]||(o[9]=a=>_.dialogVisible=a),width:"60%","before-close":i.handleClose,draggable:""},{default:l(()=>[n(S,{model:_.user,"label-width":"150px",size:"large"},{default:l(()=>[t("div",zt,[t("div",jt,[n(b,{label:"Avatar",prop:"username"},{default:l(()=>[Mt,t("input",{type:"file",onChange:o[5]||(o[5]=(...a)=>i.uploadImage&&i.uploadImage(...a)),accept:"image/*"},null,32)]),_:1}),n(b,{label:"PDF",prop:"username"},{default:l(()=>[Bt,t("input",{type:"file",onChange:o[6]||(o[6]=(...a)=>i.uploadPDF&&i.uploadPDF(...a)),accept:".pdf"},null,32)]),_:1}),n(b,{label:"Download Template",prop:"id"},{default:l(()=>[Ot,Ut]),_:1})])])]),_:1},8,["model"]),t("span",Lt,[t("button",{class:"ht-btn ht-btm-md btn--white",onClick:o[7]||(o[7]=(...a)=>i.handleClose&&i.handleClose(...a))},"Cancel"),t("button",{class:"ht-btn ht-btm-md",onClick:o[8]||(o[8]=(...a)=>i.submit&&i.submit(...a))},"Submit")])]),_:1},8,["modelValue","before-close"])]),_:1}),n(M)])}const io=et(dt,[["render",qt],["__scopeId","data-v-ca1ba67e"]]);export{io as default};
